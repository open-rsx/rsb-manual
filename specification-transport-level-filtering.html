

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transport-level Filtering &mdash; RSB 1.0-dev documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/js/multi.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/style.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Request-Reply Communication" href="specification-request-reply.html" />
    <link rel="prev" title="Inter-transport Communication" href="specification-inter-transport-communication.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> RSB
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="news.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing RSB</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="specification.html">Specification</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="specification-scope.html">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="specification-event.html">Event</a></li>
<li class="toctree-l2"><a class="reference internal" href="specification-uris.html">URIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="specification-config.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="specification-plugin.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="specification-converters.html">Converters</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="specification.html#transports">Transports</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="specification-inprocess.html">Inprocess Transport</a></li>
<li class="toctree-l3"><a class="reference internal" href="specification-spread.html">Spread Transport</a></li>
<li class="toctree-l3"><a class="reference internal" href="specification-socket.html">TCP-Socket Transport</a></li>
<li class="toctree-l3"><a class="reference internal" href="specification-yarp.html">YARP Transports</a></li>
<li class="toctree-l3"><a class="reference internal" href="specification-ros.html">ROS Transports</a></li>
<li class="toctree-l3"><a class="reference internal" href="specification-multiple-transports.html">Multi-transport Setups</a></li>
<li class="toctree-l3"><a class="reference internal" href="specification-inter-transport-communication.html">Inter-transport Communication</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Transport-level Filtering</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#notification-filtering-1">Notification Filtering (1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#payload-filtering-2">Payload Filtering (2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementations">Implementations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="specification.html#higher-level-communication-patterns">Higher-Level Communication Patterns</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="literature.html">Literature</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RSB</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="specification.html">Specification</a> &raquo;</li>
        
      <li>Transport-level Filtering</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/specification-transport-level-filtering.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            

  
  <div class="section" id="transport-level-filtering">
<span id="specification-transport-level-filtering"></span><h1>Transport-level Filtering<a class="headerlink" href="#transport-level-filtering" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This specification is a draft and may change at any
time. Furthermore, the features described in this specification are
not yet implemented.</p>
</div>
<p>For efficiency, it is desirable to filter <a class="reference internal" href="glossary.html#term-event"><span class="xref std std-term">event</span></a> s at the
<a class="reference internal" href="glossary.html#term-transport"><span class="xref std std-term">transport</span></a>-level, i.e. during processing in
<a class="reference internal" href="glossary.html#term-connector"><span class="xref std std-term">connector</span></a> s. The decision whether a <a class="reference internal" href="glossary.html#term-notification"><span class="xref std std-term">notification</span></a> (or
later <a class="reference internal" href="glossary.html#term-event"><span class="xref std std-term">event</span></a>) can be discarded or not should be made as early
as possible. In general, during processing in <a class="reference internal" href="glossary.html#term-connector"><span class="xref std std-term">connector</span></a> s,
there are at least two opportunities:</p>
<ol class="arabic simple">
<li><p>After obtaining <a class="reference internal" href="glossary.html#term-notification"><span class="xref std std-term">notification</span></a> s from the wire, but before
decoding the complete meta-data and payload</p></li>
<li><p>After decoding meta-data and <a class="reference internal" href="glossary.html#term-payload"><span class="xref std std-term">payload</span></a>, but before
constructing an <a class="reference internal" href="glossary.html#term-event"><span class="xref std std-term">event</span></a> object and adding additional
meta-data</p></li>
</ol>
<div class="section" id="notification-filtering-1">
<h2>Notification Filtering (1)<a class="headerlink" href="#notification-filtering-1" title="Permalink to this headline">¶</a></h2>
<p>One possible method for filtering <a class="reference internal" href="glossary.html#term-notification"><span class="xref std std-term">notification</span></a> s before
decoding everything works by extracting the required meta-data
fields. This has to be supported by the serialization mechanism used
for <a class="reference internal" href="glossary.html#term-notification"><span class="xref std std-term">notification</span></a> s.</p>
<p>An implementation of this scheme could work by implementing backends
for XPath engines that operate on serialized data instead of
DOM-infosets. The <a class="reference internal" href="glossary.html#term-connector"><span class="xref std std-term">connector</span></a> in question could then translate
client-supplied <a class="reference internal" href="glossary.html#term-filter"><span class="xref std std-term">filter</span></a> s on <a class="reference internal" href="glossary.html#term-event"><span class="xref std std-term">event</span></a> meta-data into XPath
expression that would be applicable to supported serialization
formats.</p>
<p>Example:</p>
<p>A <a class="reference internal" href="glossary.html#term-spread"><span class="xref std std-term">Spread</span></a> <a class="reference internal" href="glossary.html#term-connector"><span class="xref std std-term">connector</span></a> with suitable serialization
mechanism for <a class="reference internal" href="glossary.html#term-notification"><span class="xref std std-term">notification</span></a> s (e.g. Protocol Buffers) could translate an <code class="docutils literal notranslate"><span class="pre">OriginFilter</span></code> for origin <code class="docutils literal notranslate"><span class="pre">A60CBE00-99B8-11E0-8A00-001AA0342D7D</span></code> into:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="p">()</span><span class="o">/</span><span class="n">meta_data</span><span class="p">[</span><span class="nd">@sender_id</span><span class="o">=</span><span class="s2">&quot;A60CBE00-99B8-11E0-8A00-001AA0342D7D&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Compatible Filters</p>
<ul class="simple">
<li><p>Origin Filter
<code class="samp docutils literal notranslate"><span class="pre">node()/meta_data[&#64;sender_id=&quot;</span><em><span class="pre">ORIGIN</span></em><span class="pre">&quot;]</span></code></p></li>
<li><p>Method Filter
<code class="samp docutils literal notranslate"><span class="pre">node()[&#64;method=&quot;</span><em><span class="pre">METHOD</span></em><span class="pre">&quot;]</span></code></p></li>
</ul>
<div class="section" id="implementation">
<h3>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h3>
<p>The matching could be implemented efficiently by an XPath backend that
skips over fields of the serialized representation which do not have
to be inspected to decide whether the XPath matches. For
<code class="docutils literal notranslate"><span class="pre">Notification</span></code> protocol buffer messages, the following document
object model is recommended:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="n">Document</span>
<span class="o">+--</span> <span class="n">root</span>                  <span class="n">element</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="n">instance</span> <span class="n">of</span> <span class="s2">&quot;Notification&quot;</span> <span class="n">protocol</span> <span class="n">buffer</span> <span class="n">message</span>
<span class="o">+----</span> <span class="n">packed_size</span>         <span class="n">attribute</span> <span class="n">node</span><span class="p">,</span> <span class="s2">&quot;virtual&quot;</span><span class="p">:</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">correspond</span> <span class="n">to</span> <span class="n">a</span> <span class="n">field</span>
<span class="o">+----</span> <span class="n">version</span>             <span class="n">attribute</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;version&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;Notification&quot;</span> <span class="n">message</span>
<span class="o">+----</span> <span class="nb">id</span>                  <span class="n">attribute</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;id&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;Notification&quot;</span> <span class="n">message</span>
<span class="o">+----</span> <span class="n">method</span>              <span class="n">attribute</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;method&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;Notification&quot;</span> <span class="n">message</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="o">+----</span> <span class="n">meta_data</span>           <span class="n">element</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;meta_data&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;Notification&quot;</span> <span class="n">message</span>
<span class="o">+------</span> <span class="n">sender_id</span>         <span class="n">attribute</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;sender_id&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;MetaData&quot;</span> <span class="n">message</span>
<span class="o">+------</span> <span class="n">create_time</span>       <span class="n">attribute</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;create_time&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;MetaData&quot;</span> <span class="n">message</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="o">+------</span> <span class="n">user_times</span>        <span class="n">element</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;user_time&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;MetaData&quot;</span> <span class="n">message</span>
<span class="o">+--------</span> <span class="n">key</span>             <span class="n">attribute</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;key&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;UserTime&quot;</span> <span class="n">message</span>
<span class="o">+--------</span> <span class="n">timestamp</span>       <span class="n">attribute</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;timestamp&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;UserTime&quot;</span> <span class="n">message</span>
<span class="o">+------</span> <span class="n">user_times</span>        <span class="n">can</span> <span class="n">be</span> <span class="n">repeated</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="o">+------</span> <span class="n">user_infos</span>        <span class="n">element</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;user_infos&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;MetaData&quot;</span> <span class="n">message</span>
<span class="o">+--------</span> <span class="n">key</span>             <span class="n">attribute</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;key&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;UserInfo&quot;</span> <span class="n">message</span>
<span class="o">+--------</span> <span class="n">value</span>           <span class="n">attribute</span> <span class="n">node</span><span class="p">,</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="s2">&quot;value&quot;</span> <span class="n">field</span> <span class="ow">in</span> <span class="s2">&quot;UserInfo&quot;</span> <span class="n">message</span>
<span class="o">+------</span> <span class="n">user_infos</span>        <span class="n">can</span> <span class="n">be</span> <span class="n">repeated</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="payload-filtering-2">
<h2>Payload Filtering (2)<a class="headerlink" href="#payload-filtering-2" title="Permalink to this headline">¶</a></h2>
<p>Depending on the serialization mechanism used for notification
payloads, it may be possible to translate client-supplied filters
which discriminate based on event payloads into filters that are
applicable to serialized notification payloads.</p>
<p>Example:</p>
<p>TBD</p>
</div>
<div class="section" id="implementations">
<h2>Implementations<a class="headerlink" href="#implementations" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Language</p></th>
<th class="head"><p>File(s)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>C++</p></td>
<td><p><em>not yet implemented</em></p></td>
</tr>
<tr class="row-odd"><td><p>Java</p></td>
<td><p><em>not yet implemented</em></p></td>
</tr>
<tr class="row-even"><td><p>Python</p></td>
<td><p><em>not yet implemented</em></p></td>
</tr>
<tr class="row-odd"><td><p>Common Lisp</p></td>
<td><p><em>not yet committed</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>



  


           </div>
           
          </div>
          <footer>
    <div role="contentinfo">
        <span class="creativecommons">
            <a rel="license"
               href="http://creativecommons.org/licenses/by/4.0/">
                <img alt="Creative Commons License"
                     style="border-width:0; width:80px; height:15px; "
                     src="https://i.creativecommons.org/l/by/4.0/80x15.png"/></a>
            <span xmlns:dct="http://purl.org/dc/terms/"
                  href="http://purl.org/dc/dcmitype/Text"
                  property="dct:title"
                  rel="dct:type">
                The RSB documentation
            </span>
            is licensed under a
            <a rel="license"
               href="http://creativecommons.org/licenses/by/4.0/">
                Creative Commons Attribution 4.0 International License
            </a>.
        </span>
        <span class="lastupdated">
            Last updated on Jun 06, 2019.
        </span>
    </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>